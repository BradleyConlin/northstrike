{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Mission Bundle",
  "type": "object",
  "required": ["mission"],
  "properties": {
    "mission": {
      "type": "object",
      "required": ["name", "frame", "takeoff_alt_m", "waypoints"],
      "properties": {
        "name": { "type": "string" },
        "frame": { "type": "string", "enum": ["home_relative"] },
        "takeoff_alt_m": { "type": "number", "minimum": 2 },
        "speed_m_s": { "type": "number", "minimum": 0 },
        "rtl": { "type": "boolean" },
        "waypoints": {
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "object",
            "required": ["north_m", "east_m", "alt_m"],
            "properties": {
              "north_m": { "type": "number" },
              "east_m":  { "type": "number" },
              "alt_m":   { "type": "number", "minimum": 2 }
            },
            "additionalProperties": false
          }
        }
      },
      "additionalProperties": false
    },
    "params": {
      "type": "object",
      "patternProperties": {
        "^[A-Z0-9_]{2,}$": { "type": ["number", "integer"] }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}

